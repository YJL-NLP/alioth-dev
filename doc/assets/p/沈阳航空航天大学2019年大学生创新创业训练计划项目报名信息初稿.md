# 沈阳航空航天大学2019年大学生创新创业训练计划项目报名信息初稿

> 作者 : 王雨泽 2019/03/16

[TOC]

## 报名

| 字段           | 值                                        | 备选项                                                       |
| -------------- | ----------------------------------------- | ------------------------------------------------------------ |
| 学号           | 163401050112                              |                                                              |
| 姓名           | 王雨泽                                    |                                                              |
| 手机号         | 15941098250                               |                                                              |
| 项目负责人学院 | 计算机学院                                | *若干                                                        |
| 专业           | 软件工程                                  | *若干                                                        |
| 年级           | 2016                                      |                                                              |
| 班级           | 软件1601                                  |                                                              |
| QQ             | 1786641147                                |                                                              |
| 微信           |                                           |                                                              |
| 邮箱           | stinger121@live.com                       |                                                              |
| 项目名称       | Alioth:一种新的静态强类型编程语言         |                                                              |
| 项目所属学院   | 计算机学院                                | *若干                                                        |
| 所属学科       | 520 - 计算机科学技术                      | *若干                                                        |
| 项目来源       | 学生自选,学生的积累和兴趣                 | 学生自选,学生的积累和兴趣<br>学生自选,教师的科研项目<br/>教师帮选,教师的科研项目 |
| 项目关键字     | 编译技术,程序语言设计,编译器,语法分析算法 |                                                              |
| 申报意向       | 省级                                      | 国家级<br/>省级<br/>校级                                     |

### 项目简介

Alioth是面向对象的静态强类型编程语言,Alioth语言连同其所配套的编译系统基于一系列语法设计,通信协议和数据处理策略,在关于动态对象第一类闭包机制,关于动态类型推导,关于运算符重载语序,关于对象构造过程的描述,关于抽象模板数据类型追溯,关于异构分布式编译资源管理等问题域上提供了一些新颖的解决方案。

## 项目成员

| 序号 | 姓名   | 学号         |
| ---- | ------ | ------------ |
| 1    | 王雨泽 | 163401050112 |
| 2    | 陈晓   | 163401050110 |
| 3    | 刘子龙 | 163401050114 |
| 4    | 徐圣智 | 163401050118 |

## 指导教师

| 序号 | 姓名   | 工号     |
| ---- | ------ | -------- |
| 1    | 张国栋 | 19952509 |

## 项目详细信息

### 项目背景及研究意义

操作系统的开发,是复杂,困难,让人恐惧的大规模项目,它到底难在哪里?

除了由于硬件系统设计体系庞大,并且由于大量历史遗留问题,本身就很复杂之外,更重要的是,并没有专门用于开发操作系统,或者更方便开发操作系统的程序设计语言存在,这可能是因为当前还不存在操作系统多样性,个性化的需求,所以操作系统的开发并没有形成产业规模,只是被各大商业巨头占据垄断地位.

UNIX系统是操作系统历史上最大的成功,贝尔实验室的丹尼斯设计了C语言,并用它重写了UNIX操作系统.

Windows操作系统的XP到7的迁移花了几年的时间,但从7之后的版本,其开发迭代速度越来越快,其影响因素固然繁多,但其中惹人眼球的一条就是,从7开始,Windows的绝大多数代码使用C语言开发.

至今,底层开发仍然是一个让人头疼的领域,其主要原因是很多具有优秀语法特性的高级设计语言,对底层和运行时的依赖非常严重和繁琐,它们不能轻松或完整的进入底层的资源受限的极端环境工作.

Alioth的最初设计目的就是开发能用来开发操作系统的面向对象的静态强类型编程语言.

但随着Alioth的设计问题的深入,Alioth在语法特性的设计上,语言抽象体系的设计上也发展出具有Alioth本地化特色的设计思想,并且在Alioth前期成为了更显眼,更突出,更重要的项目特色.

Alioth编程语言的语法设计充满着灵活自然,却又大道至简的风格特色.在考虑到编程语言的可读性,可写性的同时,将源代码文件作为出版物来思考,全力维护源代码的美观特性.

### 研究内容和拟解决的关键问题

软件开发大致上可以分为应用软件开发和系统软件开发,随着用户的需求,网络应用的普及,应用软件的开发所面对的问题也日新月异,所以应用软件开发技术得到了长足发展.但系统软件要解决的问题主要是帮助应用软件沟通系统硬件,虽然计算机硬件支持系统的更新换代速度也非常快,但其所遵循的总体架构并不能轻易快速的改变,升级,所以系统软件开发的技术相较之应用软件开发的技术,要冷门一些,而这其中就包括编译技术.

编译技术根据编译流程,可以大致分为前桥后桥,前桥包括词法分析,语法分析,语义分析,后桥包括代码生成,代码优化,链接装载技术,Alioth项目正在解决和未来即将面对的问题,就是这些过程中所讨论的问题.

随着JavaScript语言的V8引擎开放源代码,JS语言凭借着它超级低的学习成本,迅速成为各种项目快速开发的首选语言,node团队封装了V8引擎,成为nodejs运行时环境,使得JS语言可以直接运行于PC宿主机器环境,脱离了浏览器的限制.更多的嵌入式环境集成了JS语言解析器,使得能掌握JS就已经可以开发各种领域的应用成为了可能.

由于JS的普及极大地降低了各种应用的开发和集成成本,很多优秀的设计思想被使用JS实现成为可用的高效的项目产品.但是,事情并不总是看起来的那么美好,JS降低了开发成本,使得优秀的程序员能更专注于设计思想本身,开发出更优秀的产品,但它同时也降低了开发门槛,使得JS产品的平均价值整体下降,经常会出现一个很简单的包自己就依赖了更多混乱的更简单的包这样的臃肿现象.更有甚者,一个数字是否是奇偶数,向控制台输出日志,这样的功能都被做成了可以被依赖的开发包.臃肿,复杂的依赖,给项目的维护带来了诸多不便.

Alioth将这样的现象视为一种问题,并针对这样的问题给出了解决方案.

在本科阶段的计算机学生都会被告知,一定要书写注释,一定要将定义和实现分开来书写,一定要遵循编码规范,学生们对于这样那样的限制和要求总是不理解,这是因为,足量的注释信息和规范的排版格式能增加源代码的可读性,对于维护和合作开发来说,这至关重要,但是对于一个总共不会超过二百行的学生作业,这样的要求的确会变得不可理喻.

Alioth在语法设计上,通过概念的细化,将编码规范问题提升为了语法问题,一定程度上,强迫编程人员提高了编码规范,但不至于令人反感.

在C/C++两种语言中,对于某个语法结构,有着使用之前必须定义这样的要求,当几个模块之间存在着穿插的依赖关系时,安排它们的书写顺序和头文件包含关系就会变得复杂,至少在没有相关经验时,会被自己绕乱.

但是,实际上,对于一个引用,它的定义只要存在就可以了,逻辑上是不应该要求它和引用之间存在什么书写顺序关系的,Alioth解决了这一问题.这样的设计在很多编程语言中似乎都被考虑过了,但是要注意一点,它们都不是静态强类型语言,它们的符号只要在被使用的那行代码被执行之前被绑定就可以了.Alioth则必须在编译期间解决这些问题.

在C++中,要正常使用一个模板类,就必须完全知道模板类的每个函数的内容具体是如何实现的,这对于一些保密,或闭源项目来说,就是一个糟糕的限制.在Java中同样存在模板类,但它却没有这样的限制,但是,Java却不是C++这样能脱离JVM运行的编程语言.这个问题和上一个问题类似,如果仅仅考虑静态强类型编程语言,笔者并未见过哪些编程语言对这样的问题有所考虑.

Alioth通过一种中间表达机制,使得模板类和其他类一样,可以被隐藏内部实现,不需要完全暴露源代码就能被使用.

Alioth设计了构造运算符替代构造函数,提高了对象构造语句的可读性,提高了构造方法的可重用度.

Alioth设计了用于在元组中以一个特别的键搜索元组分量的运算结构,称为定位运算符,每一个定位运算符的实现都是唯一的语法结构.定位运算符的设计将Alioth语言的运算符种类变成了无穷集合.定位运算符的灵感来源于C++中对元组的取值方法的设计,由于元组不同于数组,对元组的越界访问不应当推迟到运行时再抛出异常,应当作为语义错误在编译期静态检查并报告为错误,因此,C++不得不将get方法设计为全局的静态的模板函数,以下标作为模板参数,使得下标不正确的方法不存在实例,利用语法分析器报告错误.

C++提供了运算符重载功能,这是一个很灵活的语法特性,对于提高中间件的重用性有很大的作用,但是这个语法特性有一个限制,就是运算符一定作为主运算子的成员函数存在,当一些运算符需要满足交换律来使用时,就不得不将一些运算符设计为全局的友元运算符.

针对这样的问题,Alioth提出了反重载概念,使得用户可以在不破坏开闭原则的情况下让运算符重载满足交换律.

闭包是面向对象的编程语言的函数式编程的典型特征,然而,目前为止,能够对闭包进行良好支持的编程语言都是脚本语言,这大概是因为脚本语言的栈空间是虚拟的,要打破对象随着退栈而销毁这样的生命周期规定,很轻松,而真正使用栈空间管理局部对象的静态编程语言就很难做到这一点了.

上述原因是笔者的猜测,但C++语法规范的确明确声明过,不要试图使用lambda表达式捕获一个局部对象,这样做的后果是未定义的.

Alioth则设计了一种对象生命周期管理策略,用于完整的支持局部对象的闭包.

Alioth未来将通过合理的符号规范化模块,实现与C++的完全兼容,使得任何熟悉C/C++的开发人员,能以最低的成本转移到Alioth上并继续之前的工作.

Alioth还向其他优秀的编程语言学习了各种灵活的语法特性,虽然每个语法特性都在原版的基础上有所变化,但是语法设计的好坏不能简单评价,所以不能确定这些改变都是有好处的,不再赘述.

### 项目创新之处

* 交互式编译

  Alioth编译器可以在启动阶段通过特殊的命令行参数进入交互模式,在交互模式,Alioth可以与任何能抽象成流的数据链路交互,这项功能使得Alioth编译器可以自动联机协作,使得多个部署在不同机器上的Alioth编译器实例可以相互协调,共同完成一项编译任务分担算力,这在可能出现的极限环境下,使得一套运算力低下但数量充足的资源受限设备可以完成编译任务.甚至,Alioth的交互功能也可以用于在编译期直接与代码仓库服务器交互,以用户的权限获取编译所需的源代码或编译中间产物,这使得用户再也不需要手动管理自己所依赖的中间件的版本和升级问题了,同时也有助于实现不同层次的开闭源管理.

* 基于抽象空间的编译资源管理

  Alioth编程语言连同其所配套的编译系统将编译资源的物理部署环境抽象成为一个以空间为最大单位的虚拟环境.这个抽象的资源部署结构由专门的文档引擎进行映射,依照底层支持,文档引擎可以像虚拟文件系统一样,将任何可以打开,关闭,读,写的数据源抽象成可用的编译资源,这样的设计使得Alioth编译器和它即将使用的源代码可以随意分布在一个分布式环境的任何若干节点上,只要节点之间能建立数据通路,Alioth就能编译目标资源.

  譬如一个无盘工作站从A服务器镜像启动了一个Alioth实例,在内存中运行,要将B服务器中的源代码文件编译到C服务器上作为编译产物存储,这样的动作虽然依靠虚拟文件系统的支持,和几条流重定向指令也能做到,但是Alioth为之提供了更为方便,更为专用,更为全面的数据流抽象策略,在任何真实项目中,方便就是价值,麻烦就是成本,项目规模越大,这一点越明显,Alioth的各种其他设计也都是在各种细节上尽可能使得开发成本降低.

* 日志引擎与日志范式

  Alioth的日志引擎用于隐藏日志内容的具体书写形式,给其他模块封装一个仅考虑组织日志需要的动态信息的逻辑接口,与此对应的,是一种被笔者成为日志范式的日志描述文法,它告诉日志引擎,给定日志参数集T,如何将这些信息组织成一条人类可读的日志字符串.日志文法描述了日志所关联的源代码文件,错误源的行列信息,日志的严重性程度,日志文本信息,这些信息足以使Alioth与任何其他可视化编辑工具无缝结合,譬如VS-Code.

  日志文法是被书写在配置文件中的一个JSON对象,它很方便编辑和修改,用户可以根据自己的习惯编辑或下载日志配置文件,譬如对日志内容进行本地化翻译.

* 可重入的最左归约语法分析算法

  编译器的语法分析引擎使用一种笔者称之为容词状态栈的数据结构来支持最左归约算法,此数据结构为语法分析算法提供了停滞和移出两种新的动作,使得语法分析器可以根据语境的不同来应用不同的文法.同时,容词状态栈使得语法分析器的归约动作和状态的关联从绝对的变成了相对的关系,这样的变化使得一串边界清晰的状态成为了一个可重入的子分析过程,可以被其他若干不同的分析流程使用,这减免了语法分析算法中可能出现的重复性代码,降低了编译器的开发和维护成本.

* 元素机制

  Alioth引入了元素机制,替代变量机制,Alioth中,元素由元素名,元素原型构成,元素是编程语言用以操作内存中对象的媒介,元素分为四种不同的类型,分别携带着不同的语义和使用限制.这样的设计提高了Alioth源代码的表意清晰程度,提高了初学者对内存,对象等概念的理解深度,一定程度上减免了由于表意混淆而可能造成的使用错误.

* 准方法机制

  C++17开始,才允许lambda表达式参数使用auto关键字来模糊数据类型,而其实现机制实际上是产生了用于处理不同数据类型的参数的同名lambda实例,这样的lambda被传递时的行为是复杂的.

  Alioth基于一种可以双向搜索的类型描述符机制和一种类型假设语法的支持,实现了任何方法的参数都可以暂时不指定数据类型,针对静态的方法,Alioth使用和C++一样的策略,产生用于处理不同数据类型的参数的方法实例,在运行时提供0开销的泛型支持.而对于lambda表达式,Alioth则依赖于类型描述符实现了一种时间复杂度为O(1)的动态类型匹配,并执行正确的动作.

* 虚方法机制

  虚方法机制运行一个方法不指定其返回值的数据类型.此时虚方法使用RAX寄存器返回实际返回对象的类型ID,而返回对象使用指针转储,类似于C语言返回结构体时的行为.

  这样的设计使得函数的有效返回值在某一种数据类型上可以布满全部取值空间.这样的设计能简化复杂功能函数的设计,降低开发成本.

* 构造运算符

  Alioth为对象的构造设计了不同于C++而类似于JSON的构造运算符,构造运算符的使用形式与JSON基本相符,差别在于其内容是每个参数的参数名和对应的传参值,而不是直接指定对象的成员.

  构造运算符的参数必须带名传递,这样即提高了代码的可读性,又消除了构造运算符的参数的先序关系,构造运算符的传参顺序可以不遵循构造运算符的定义顺序.同时,构造运算符的参数可以随意携带默认参数,而不需要必须从最后一个参数开始携带默认传参,这样的设计减少了构造运算符的重载的数量,降低了开发成本.

* 移动运算符

  移动运算符并不是一个能被书写在表达式中用于链接两个运算子的运算符,而是一个当对象即将由于被闭包而从栈空间移动到GC空间自动触发的过程,用于给编程人员一个机会处理对象的地址即将发生的变化.

  这个运算符的设计是为了让对象地址的变化变得可控,从而,编译器可以通过安排一个对象的地址发生变化,从而延长对象的生命周期,以此支持跨越作用于的闭包行为.

* 类型假设语句

  类型假设语句用于针对类型未知的对象引导一个假设对象类型已知的语境,容纳一串指令.

  类型假设语句在静态方法中会根据静态类型推导,剔除不可能执行的语句,产生针对已知数据类型的专用方法实例.在动态环境中,类型假设语句会被编译成为类似于switch的时间复杂度为O(n)的RTTI过程.

* 定位运算符

  定位运算符可以被认为是一种具名运算符,将本应作为定位运算的参数的下标提升为定位运算的语法结构的一部分,即名称,这样的设计将越界调用定位运算所产生的运行时错误提升为语法错误,减小了调试成本.

* 运算符反重载

  允许通过一种标记,规定当运算符的宿主对象作为运算的次运算子时,若要执行运算符重载,则应当选择此版本.

  这样的设计使得一个类的运算符重载可以兼顾正反两种语序,使得中间件的可用性更强.

* 运算符正反同构

  在运算符可以反重载的基础上,若正反运算符的内容书写形式完全相同,则没必要重复书写两次,仅需要标记运算符为正反同构,就能产生正反两个运算符实例可供调用.

* 谓词机制

  谓词用于限制模板类的模板参数的原型,这样的设计可以用来增加类定义的复杂度,让它能进一步明确其使用范围,将潜在的运行时错误提升为编译器能检查的语义错误.譬如一个模板类的模板参数不应当传入引用,否则将导致运行时崩溃,这样的限制若只写在注释中,总会被一些人忽略,但如果将其限制为一种语法错误,编译器能阻止带有潜在风险的程序被编译成为执行体.

* 谓词引导的定义分支

  在谓词机制的基础上,类的定义可以根据模板参数的类型不同,选择不同的组合,增加了模板类定义的灵活性.

### 项目进度安排

1. 初期

   基础设施搭建,第一版本的开发完成

   整理项目技术点,投稿论文

2. 中期

   完成初期设计中所有的功能特性,完成运行时支持,基础开发套件

3. 后期

   替换底层支持,完善系统独立性,维护社区

### 项目经费预算

### 预期研究成果

